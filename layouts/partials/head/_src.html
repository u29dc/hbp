<!-- ########################################################################################### -->
{{ printf "<!-- EXTRA -->" | safeHTML }}
{{ if .Site.Params.resources.css }}
	{{ range .Site.Params.resources.css }}
		<link rel="stylesheet" href="{{ . }}">
	{{ end }}
{{ end }}

{{ if .Site.Params.resources.js }}
	{{ range .Site.Params.resources.js }}
		<script src="{{ . }}"></script>
	{{ end }}
{{ end }}

<!-- ########################################################################################### -->
{{ printf "<!-- MAIN -->" | safeHTML }}
{{ $css := resources.Get "css/main.scss" | resources.ToCSS (dict "outputStyle" "compressed") | resources.PostCSS | resources.Minify }}
{{ $opts := dict "noComments" true "compact" true "minified" true }}
{{ $js := resources.Get "js/main.js" | babel $opts | resources.Minify }}

{{ if eq .Site.Params.resources.inline true }}
	<!-- inline -->
	{{ with $css }}
	<style>{{ .Content | safeCSS }}</style>
	{{ end }}

	{{ with $js }}
	<script>{{ .Content | safeJS }}</script>
	{{ end }}

{{ else }}

	{{ if eq .Site.Params.resources.fingerprint false }}
		<!-- fingerprint and hash sources -->
		<link rel="stylesheet" href="{{ $css.Permalink | relURL }}">
		<script defer src="{{ $js.Permalink | relURL }}"></script>

	{{ else }}
		{{ $maincss := $css | resources.Fingerprint "sha512" }}
		{{ $mainjs := $js | resources.Fingerprint "sha512" }}
		<link rel="stylesheet" href="{{ $maincss.Permalink | relURL }}" integrity="{{ $maincss.Data.Integrity }}" crossorigin="anonymous">
		<script defer src="{{ $mainjs.Permalink | relURL }}" integrity="{{ $mainjs.Data.Integrity }}" crossorigin="anonymous"></script>
	{{ end }}

{{ end }}
